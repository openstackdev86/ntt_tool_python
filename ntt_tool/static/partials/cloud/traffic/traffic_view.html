<ng-include src="'/static/partials/common/header.html'"></ng-include>

<div class="container">
    <div class="row">
        <div class="col-md-12">
            <ol class="breadcrumb">
                <li><a href="#/cloud/">Cloud List</a></li>
                <li><a href="#/cloud/view/{$ cloudId $}/">Cloud Details</a></li>
                <li class="active">Traffic</li>
            </ol>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <div class="page-header">
                <h1>Traffic Details</h1>
                <a href="#/cloud/traffic/edit/{$ cloudId $}/{$ id $}/" class="btn btn-primary btn-sm pull-right"><i class="fa fa-edit fa-fw"></i> Edit</a>
            </div>
            <table class="table bg-white border">
                <tr>
                    <td class="text-right col-md-3">Name : </td>
                    <td class="text-info col-md-3">{$ traffic.name $}</td>
                    <td class="text-right col-md-3">Allowed delta percentage :  </td>
                    <td class="text-info col-md-3">{$ traffic.allowed_delta_percentage $} %</td>
                </tr>
                <tr>
                    <td class="text-right col-md-3">Remote User : </td>
                    <td class="text-info col-md-3">{$ traffic.remote_user $}</td>
                    <td class="text-right col-md-3">Number of workers :  </td>
                    <td class="text-info col-md-3">{$ traffic.number_of_workers $}</td>
                </tr>
                <tr>

                    <td class="text-right col-md-3">External host : </td>
                    <td class="text-info col-md-3">{$ traffic.external_host $}</td>
                    <td class="text-right col-md-3">IPERF duration :  </td>
                    <td class="text-info col-md-3">{$ traffic.iperf_duration $} sec</td>
                </tr>
                <tr>
                    <td class="text-right col-md-3">SSH gateway : </td>
                    <td class="text-info col-md-3">{$ traffic.ssh_gateway $}</td>
                    <td class="text-right col-md-3">Test Type :  </td>
                    <td class="text-info col-md-3">{$ traffic.test_type $}</td>
                </tr>
                <tr>
                    <td class="text-right col-md-3">Test result path :  </td>
                    <td class="text-info col-md-3">{$ traffic.test_result_path $}</td>
                    <td class="text-right col-md-3">Test Method :  </td>
                    <td class="text-info col-md-3">{$ traffic.test_method $}</td>
                </tr>
                <tr>
                    <td class="text-right col-md-3">Test environment :  </td>
                    <td class="text-info col-md-3">{$ traffic.test_environment $}</td>
                    <td class="text-right col-md-3">&nbsp;</td>
                    <td class="text-info col-md-3">&nbsp;</td>
                </tr>
            </table>
        </div>
    </div>
    <!-- end: traffic details -->

    <div class="row">
        <div class="col-md-12">
            <div class="page-header">
                <h1>Select Tenants & Networks</h1>
            </div>

            <!-- Test type : Intra tenant -->
            <div ng-show="traffic.test_type == 'intra-tenant'">
                <ng-include src="'/static/partials/cloud/traffic/traffic_view_tenants_test_env.html'"></ng-include>
                <ng-include src="'/static/partials/cloud/traffic/traffic_view_tenants_prod_env.html'"></ng-include>
            </div>
            <!-- end: Test type : Intra tenant -->
        </div>
        <!-- ./col-md-12 -->
    </div>
    <!-- /row -->

    <!-- traffic test panel -->
    <div class="row">
        <div class="col-md-12">

            <div>
                <div class="page-header">
                    <button type="button" ng-click="runTrafficTest(traffic.id)" class="btn btn-danger btn-sm pull-right">Run Traffic Test</button>
                    <h1>Traffic Test</h1>
                </div>
            </div>

            <table class="table table-bordered table-stripped bg-white" ng-show="testResults.length > 0">
                <tr>
                    <th>Test Id</th>
                    <th>Test started on</th>
                    <th>Test completed on</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
                <tr ng-repeat="testResult in testResults">
                    <td>{$ testResult.id $}</td>
                    <td>{$ testResult.stared_on $}</td>
                    <td>{$ testResult.completed_on $}</td>
                    <td>
                        <div ng-show="testResult.status == 'inprogress'">
                            <div class="progress no-margin-bottom">
                              <div class="progress-bar progress-bar-striped active"
                                   role="progressbar"
                                   aria-valuenow="50"
                                   aria-valuemin="0"
                                   aria-valuemax="100"
                                   style="width:100%">
                                In Progress
                              </div>
                            </div>
                        </div>
                    </td>
                    <td></td>
                </tr>
            </table>

            <p ng-hide="testResults.length > 0">No data found.</p>
        </div>
    </div>
    <!-- end: traffic test panel -->
</div>

